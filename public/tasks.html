<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <title>–ó–∞–¥–∞–Ω–∏—è - Magnum Coins</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Monetag SDK -->
    <script src='//libtl.com/sdk.js' data-zone='9731351' data-sdk='show_9731351'></script>
    <!-- Adstera SDK -->
    <script async="async" data-cfasync="false" src="//pl27442537.profitableratecpm.com/18dc4b75af6a5d63d9b595f478a96efe/invoke.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: -webkit-linear-gradient(90deg,#1f2c51,#1f2c51,#000000);
            background: linear-gradient(90deg,#1f2c51,#1f2c51,#000000);
            min-height: 100vh;
            color: white;
            padding: 20px;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            25% { background-position: 100% 50%; }
            50% { background-position: 100% 100%; }
            75% { background-position: 0% 100%; }
            100% { background-position: 0% 50%; }
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            color: white;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .back-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding-top: 20px;
        }

        .task-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .task-item:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .task-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .task-icon {
            font-size: 2rem;
            margin-right: 15px;
        }

        .task-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: white;
        }

        .task-description {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .task-reward {
            color: #ffd700;
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .task-button {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            border: none;
            border-radius: 15px;
            padding: 15px 30px;
            color: white;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .task-button:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .task-button:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .dev-task {
            background: rgba(255, 193, 7, 0.2);
            border-color: #ffc107;
        }

        .dev-task .task-button {
            background: linear-gradient(45deg, #ffc107, #ff9800);
        }

        .cooldown-info {
            background: rgba(255, 193, 7, 0.2);
            border: 1px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .cooldown-info h3 {
            color: #ffc107;
            margin-bottom: 10px;
        }

        .cooldown-info p {
            color: rgba(255, 255, 255, 0.8);
        }

        .stats-panel {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .stats-panel h3 {
            margin-bottom: 15px;
            color: #ffd700;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-row:last-child {
            border-bottom: none;
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.5rem;
            }
            
            .task-item {
                padding: 20px;
            }
            
            .task-title {
                font-size: 1.1rem;
            }
            
            .task-button {
                padding: 12px 20px;
                font-size: 0.9rem;
            }
        }

        /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–∞—Å—ã */

        #h1, #h1-adstera {
            animation: rotate 60s linear infinite;
        }

        #h2, #h2-adstera {
            width: 45%;
            left: 5%;
            top: 45%;
            background-color: #636363;
            animation: rotate 1s linear infinite;
        }

        @keyframes rotate {
            from {
                transform: rotate(90deg);
            }

            to {
                transform: rotate(450deg);
            }
        }

        /* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –º–∏–Ω–∏–∞—Ç—é—Ä–Ω—ã—Ö —á–∞—Å–æ–≤ */
        .cloader {
            width: 2em;
            height: 2em;
            border: 2px solid white;
            border-radius: 50%;
            margin: 0 auto;
            position: relative;
            padding: 0.5rem;
            display: inline-block;
            vertical-align: middle;
            margin-right: 10px;
            overflow: visible;
        }

        .clface {
            position: relative;
            width: 100%;
            height: 100%;
            transform: translateY(-1px);
        }

        .top {
            height: 4px;
            width: 2px;
            content: '';
            background-color: white;
            border-radius: 5em;
            margin-top: -12px;
            margin-left: 17px;
        }

        .bottom {
            height: 4px;
            width: 2px;
            content: '';
            background-color: white;
            border-radius: 5em;
            margin-top: 54px;
            margin-left: 17px;
        }

        .left {
            height: 2px;
            width: 4px;
            content: '';
            background-color: white;
            border-radius: 5em;
            margin-top: -33px;
            margin-left: 45px;
        }

        .right {
            height: 2px;
            width: 4px;
            content: '';
            background-color: white;
            border-radius: 5em;
            margin-top: -2px;
            margin-left: -14px;
        }

        .clsface {
            position: absolute;
            width: 16px;
            height: 16px;
            margin-left: 10px;
            margin-top: 6px;
            border-radius: 6em;
            border: 1px solid #636363;
        }

        .hand {
            width: 65%;
            height: 2px;
            background-color: white;
            border-radius: 3em;
            border: none;
            position: absolute;
            top: 85%;
            left: -15%;
            transform-origin: 100%;
            transform: rotate(90deg);
        }

        .pin {
            width: 25%;
            height: 25%;
            border-radius: 50%;
            background: white;
            position: absolute;
            top: 86%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        #sub, #sub-adstera {
            width: 10%;
            height: 10%;
            border-radius: 50%;
            background: #636363;
            position: absolute;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .cooldown-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 10px;
        }

        .cooldown-text {
            color: #ff6b6b;
            font-size: 14px;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header" style="display:flex;align-items:center;gap:12px;margin-bottom:20px;">
            <button
                class="bg-white text-center w-36 rounded-xl h-12 relative text-black text-lg font-semibold group"
                type="button"
                onclick="goBack()"
            >
                <div
                    class="bg-green-400 rounded-lg h-10 w-1/4 flex items-center justify-center absolute left-1 top-[4px] group-hover:w-[132px] z-10 duration-500"
                >
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" height="20" width="20">
                        <path d="M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z" fill="#000"></path>
                        <path d="m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312L237.248 512z" fill="#000"></path>
                    </svg>
                </div>
                <p class="translate-x-2">–ù–∞–∑–∞–¥</p>
            </button>
            <div class="header" style="flex:1;text-align:center;">
                <h1>üéØ –ó–∞–¥–∞–Ω–∏—è</h1>
                <p>–í—ã–ø–æ–ª–Ω—è–π—Ç–µ –∑–∞–¥–∞–Ω–∏—è –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –Ω–∞–≥—Ä–∞–¥—ã!</p>
            </div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
        <div class="stats-panel">
            <h3>üìä –í–∞—à–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
            <div class="stat-row">
                <span>üí∞ –ú–æ–Ω–µ—Ç:</span>
                <span id="coinsDisplay">0</span>
            </div>
            <div class="stat-row">
                <span>üì∫ Monetag —Ä–µ–∫–ª–∞–º:</span>
                <span id="adsWatchedDisplay">0</span>
            </div>
            <div class="stat-row">
                <span>üì∫ Adstera —Ä–µ–∫–ª–∞–º:</span>
                <span id="adsteraAdsWatchedDisplay">0</span>
            </div>
            <div class="stat-row">
                <span>‚úÖ –ó–∞–¥–∞–Ω–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–æ:</span>
                <span id="tasksCompletedDisplay">0</span>
            </div>
            <div class="stat-row">
                <span>‚è∞ –ü–æ—Å–ª–µ–¥–Ω—è—è Monetag:</span>
                <span id="lastAdDisplay">–ù–∏–∫–æ–≥–¥–∞</span>
            </div>
            <div class="stat-row">
                <span>‚è∞ –ü–æ—Å–ª–µ–¥–Ω—è—è Adstera:</span>
                <span id="lastAdsteraDisplay">–ù–∏–∫–æ–≥–¥–∞</span>
            </div>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫—É–ª–¥–∞—É–Ω–µ -->
        <div id="cooldownInfo" class="cooldown-info" style="display: none;">
            <h3>‚è∞ –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è</h3>
            <p id="cooldownText">–ü–æ–¥–æ–∂–¥–∏—Ç–µ –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º —Ä–µ–∫–ª–∞–º—ã</p>
        </div>

        <!-- –ó–∞–¥–∞–Ω–∏—è -->
        <div class="task-item">
            <div class="task-header">
                <div class="task-icon">üì∫</div>
                <div class="task-title">–°–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∫–ª–∞–º—É Monetag</div>
            </div>
            <div class="task-description">
                –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∫–ª–∞–º—É Monetag –∏ –ø–æ–ª—É—á–∏—Ç–µ 50 –º–æ–Ω–µ—Ç! –†–µ–∫–ª–∞–º–∞ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –±—ã—Å—Ç—Ä–æ –Ω–∞–∫–æ–ø–∏—Ç—å –º–æ–Ω–µ—Ç—ã –¥–ª—è –ø–æ–∫—É–ø–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π.
            </div>
            <div class="task-reward">üí∞ –ù–∞–≥—Ä–∞–¥–∞: 50 –º–æ–Ω–µ—Ç</div>
            <button class="task-button" id="watchAdBtn">
                <span class="button-text">–°–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∫–ª–∞–º—É</span>
                <div class="cooldown-container" style="display: none;">
                    <div class="cloader">
                        <div class="clface">
                            <div class="clsface">
                                <div id="h2" class="hand"></div>
                            </div>
                            <div class="top"></div>
                            <div class="bottom"></div>
                            <div class="left"></div>
                            <div class="right"></div>
                            <div id="sub" class="pin"></div>
                            <div id="h1" class="hand"></div>
                            <div id="main" class="pin"></div>
                        </div>
                    </div>
                    <span class="cooldown-text">–ü–æ–¥–æ–∂–¥–∏—Ç–µ</span>
                </div>
            </button>
        </div>

        <div class="task-item">
            <div class="task-header">
                <div class="task-icon">üì∫</div>
                <div class="task-title">–°–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∫–ª–∞–º—É Adstera</div>
            </div>
            <div class="task-description">
                –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∫–ª–∞–º—É Adstera –∏ –ø–æ–ª—É—á–∏—Ç–µ 75 –º–æ–Ω–µ—Ç! –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞—Ä–∞–±–æ—Ç–∫–∞ —Å –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π –Ω–∞–≥—Ä–∞–¥–æ–π.
            </div>
            <div class="task-reward">üí∞ –ù–∞–≥—Ä–∞–¥–∞: 75 –º–æ–Ω–µ—Ç</div>
            <button class="task-button" id="watchAdsteraBtn">
                <span class="button-text">–°–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∫–ª–∞–º—É Adstera</span>
                <div class="cooldown-container" style="display: none;">
                    <div class="cloader">
                        <div class="clface">
                            <div class="clsface">
                                <div id="h2-adstera" class="hand"></div>
                            </div>
                            <div class="top"></div>
                            <div class="bottom"></div>
                            <div class="left"></div>
                            <div class="right"></div>
                            <div id="sub-adstera" class="pin"></div>
                            <div id="h1-adstera" class="hand"></div>
                            <div id="main-adstera" class="pin"></div>
                        </div>
                    </div>
                    <span class="cooldown-text">–ü–æ–¥–æ–∂–¥–∏—Ç–µ</span>
                </div>
            </button>
        </div>

        <div class="task-item">
            <div class="task-header">
                <div class="task-icon">üéÆ</div>
                <div class="task-title">–ò–≥—Ä–∞—Ç—å –≤ –∏–≥—Ä—É</div>
            </div>
            <div class="task-description">
                –ó–∞–≤–µ—Ä—à–∏—Ç–µ –º–∏–Ω–∏-–∏–≥—Ä—É –∏ –ø–æ–ª—É—á–∏—Ç–µ 100 –º–æ–Ω–µ—Ç! –£–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ –∏–≥—Ä—ã –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∫–∞.
            </div>
            <div class="task-reward">üí∞ –ù–∞–≥—Ä–∞–¥–∞: 100 –º–æ–Ω–µ—Ç</div>
            <button class="task-button" id="playGameBtn">–ò–≥—Ä–∞—Ç—å</button>
        </div>

        <div class="task-item">
            <div class="task-header">
                <div class="task-icon">üì±</div>
                <div class="task-title">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</div>
            </div>
            <div class="task-description">
                –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø–æ–ª—É—á–∏—Ç–µ 200 –º–æ–Ω–µ—Ç! –û—Ç–ª–∏—á–Ω—ã–π —Å–ø–æ—Å–æ–± –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –º–Ω–æ–≥–æ –º–æ–Ω–µ—Ç —Å—Ä–∞–∑—É.
            </div>
            <div class="task-reward">üí∞ –ù–∞–≥—Ä–∞–¥–∞: 200 –º–æ–Ω–µ—Ç</div>
            <button class="task-button" id="installAppBtn">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è —Å–±—Ä–æ—Å–∞ –∫—É–ª–¥–∞—É–Ω–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏) -->
        <div class="task-item dev-task">
            <div class="task-header">
                <div class="task-icon">üîÑ</div>
                <div class="task-title">–°–±—Ä–æ—Å–∏—Ç—å –∫—É–ª–¥–∞—É–Ω —Ä–µ–∫–ª–∞–º—ã</div>
            </div>
            <div class="task-description">
                –°–±—Ä–æ—Å–∏—Ç—å –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∫–ª–∞–º—ã. –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
            </div>
            <div class="task-reward">‚ö†Ô∏è –¢–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏</div>
            <button class="task-button" id="resetCooldownBtn">–°–±—Ä–æ—Å–∏—Ç—å</button>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è Adstera —Ä–µ–∫–ª–∞–º—ã -->
    <div id="container-18dc4b75af6a5d63d9b595f478a96efe" style="display: none;"></div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();

        // –ò–≥—Ä–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        let gameData = {
            coins: 0,
            clicks: 0,
            coinsPerClick: 1,
            tasksCompleted: 0,
            adsWatched: 0,
            lastAdWatch: 0,
            adsteraAdsWatched: 0,
            lastAdsteraWatch: 0
        };

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–∫–ª–∞–º—ã Monetag
        const AD_CONFIG = {
            zoneId: '9731351',
            rewardAmount: 50,
            cooldownMinutes: 1, // 60 —Å–µ–∫—É–Ω–¥ = 1 –º–∏–Ω—É—Ç–∞
            adDuration: 30
        };

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–∫–ª–∞–º—ã Adstera
        const ADSTERA_CONFIG = {
            zoneId: '18dc4b75af6a5d63d9b595f478a96efe',
            containerId: 'container-18dc4b75af6a5d63d9b595f478a96efe',
            rewardAmount: 75,
            cooldownMinutes: 1, // 60 —Å–µ–∫—É–Ω–¥ = 1 –º–∏–Ω—É—Ç–∞
            adDuration: 25
        };

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        function loadGameData() {
            const saved = localStorage.getItem('magnumCoinsData');
            if (saved) {
                try {
                    const loadedData = JSON.parse(saved);
                    // –û–±—ä–µ–¥–∏–Ω—è–µ–º —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π
                    gameData = {
                        coins: loadedData.coins || 0,
                        clicks: loadedData.clicks || 0,
                        coinsPerClick: loadedData.coinsPerClick || 1,
                        tasksCompleted: loadedData.tasksCompleted || 0,
                        adsWatched: loadedData.adsWatched || 0,
                        lastAdWatch: loadedData.lastAdWatch || 0,
                        adsteraAdsWatched: loadedData.adsteraAdsWatched || 0,
                        lastAdsteraWatch: loadedData.lastAdsteraWatch || 0
                    };
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö:', error);
                    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–µ
                }
            }
            updateDisplay();
        }

        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
        function saveGameData() {
            localStorage.setItem('magnumCoinsData', JSON.stringify(gameData));
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
        function updateDisplay() {
            document.getElementById('coinsDisplay').textContent = gameData.coins.toLocaleString();
            document.getElementById('adsWatchedDisplay').textContent = gameData.adsWatched;
            document.getElementById('adsteraAdsWatchedDisplay').textContent = gameData.adsteraAdsWatched;
            document.getElementById('tasksCompletedDisplay').textContent = gameData.tasksCompleted;
            
            // –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ä–µ–∫–ª–∞–º—ã Monetag
            if (gameData.lastAdWatch) {
                const timeSinceLastAd = Math.floor((Date.now() - gameData.lastAdWatch) / 1000 / 60);
                document.getElementById('lastAdDisplay').textContent = `${timeSinceLastAd} –º–∏–Ω –Ω–∞–∑–∞–¥`;
            } else {
                document.getElementById('lastAdDisplay').textContent = '–ù–∏–∫–æ–≥–¥–∞';
            }

            // –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ä–µ–∫–ª–∞–º—ã Adstera
            if (gameData.lastAdsteraWatch) {
                const timeSinceLastAdstera = Math.floor((Date.now() - gameData.lastAdsteraWatch) / 1000 / 60);
                document.getElementById('lastAdsteraDisplay').textContent = `${timeSinceLastAdstera} –º–∏–Ω –Ω–∞–∑–∞–¥`;
            } else {
                document.getElementById('lastAdsteraDisplay').textContent = '–ù–∏–∫–æ–≥–¥–∞';
            }

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—É–ª–¥–∞—É–Ω—ã
            checkCooldown();
            checkAdsteraCooldown();
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—É–ª–¥–∞—É–Ω —Ä–µ–∫–ª–∞–º—ã Monetag
        function checkCooldown() {
            const cooldownInfo = document.getElementById('cooldownInfo');
            const watchAdBtn = document.getElementById('watchAdBtn');
            const buttonText = watchAdBtn.querySelector('.button-text');
            const cooldownContainer = watchAdBtn.querySelector('.cooldown-container');
            
            if (!canWatchAd()) {
                const now = Date.now();
                const cooldownMs = AD_CONFIG.cooldownMinutes * 60 * 1000;
                let remainingSeconds = 0;
                
                if (gameData.lastAdWatch && typeof gameData.lastAdWatch === 'number') {
                    remainingSeconds = Math.ceil((cooldownMs - (now - gameData.lastAdWatch)) / 1000);
                    remainingSeconds = Math.max(0, remainingSeconds);
                }
                
                cooldownInfo.style.display = 'block';
                document.getElementById('cooldownText').textContent = `–ü–æ–¥–æ–∂–¥–∏—Ç–µ –µ—â–µ ${Math.ceil(remainingSeconds / 60)} –º–∏–Ω—É—Ç –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º —Ä–µ–∫–ª–∞–º—ã Monetag`;
                watchAdBtn.disabled = true;
                buttonText.style.display = 'none';
                cooldownContainer.style.display = 'flex';
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —á–∞—Å–æ–≤
                updateClockAnimation(watchAdBtn, remainingSeconds);
            } else {
                cooldownInfo.style.display = 'none';
                watchAdBtn.disabled = false;
                buttonText.style.display = 'block';
                cooldownContainer.style.display = 'none';
            }
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—É–ª–¥–∞—É–Ω —Ä–µ–∫–ª–∞–º—ã Adstera
        function checkAdsteraCooldown() {
            const watchAdsteraBtn = document.getElementById('watchAdsteraBtn');
            const buttonText = watchAdsteraBtn.querySelector('.button-text');
            const cooldownContainer = watchAdsteraBtn.querySelector('.cooldown-container');
            
            if (!canWatchAdstera()) {
                const now = Date.now();
                const cooldownMs = ADSTERA_CONFIG.cooldownMinutes * 60 * 1000;
                let remainingSeconds = 0;
                
                if (gameData.lastAdsteraWatch && typeof gameData.lastAdsteraWatch === 'number') {
                    remainingSeconds = Math.ceil((cooldownMs - (now - gameData.lastAdsteraWatch)) / 1000);
                    remainingSeconds = Math.max(0, remainingSeconds);
                }
                
                watchAdsteraBtn.disabled = true;
                buttonText.style.display = 'none';
                cooldownContainer.style.display = 'flex';
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —á–∞—Å–æ–≤
                updateClockAnimation(watchAdsteraBtn, remainingSeconds);
            } else {
                watchAdsteraBtn.disabled = false;
                buttonText.style.display = 'block';
                cooldownContainer.style.display = 'none';
            }
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ —Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∫–ª–∞–º—É Monetag
        function canWatchAd() {
            const now = Date.now();
            const cooldownMs = AD_CONFIG.cooldownMinutes * 60 * 1000;
            
            if (!gameData.lastAdWatch || typeof gameData.lastAdWatch !== 'number') {
                return true;
            }
            
            return (now - gameData.lastAdWatch) >= cooldownMs;
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ —Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∫–ª–∞–º—É Adstera
        function canWatchAdstera() {
            const now = Date.now();
            const cooldownMs = ADSTERA_CONFIG.cooldownMinutes * 60 * 1000;
            
            if (!gameData.lastAdsteraWatch || typeof gameData.lastAdsteraWatch !== 'number') {
                return true;
            }
            
            return (now - gameData.lastAdsteraWatch) >= cooldownMs;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ —á–∞—Å–æ–≤
        function updateClockAnimation(button, remainingSeconds) {
            const h1 = button.querySelector('#h1, #h1-adstera');
            const cooldownText = button.querySelector('.cooldown-text');
            
            if (h1 && cooldownText) {
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç
                const minutes = Math.floor(remainingSeconds / 60);
                const seconds = remainingSeconds % 60;
                cooldownText.textContent = `–ü–æ–¥–æ–∂–¥–∏—Ç–µ ${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
                h1.style.animation = 'none';
                h1.offsetHeight; // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π reflow
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—É—é –∞–Ω–∏–º–∞—Ü–∏—é
                const animationDuration = Math.max(1, remainingSeconds);
                h1.style.animation = `rotate ${animationDuration}s linear infinite`;
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∫–ª–∞–º—ã Monetag
        function handleWatchAd() {
            if (!canWatchAd()) {
                return;
            }
            
            console.log('üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ SDK Monetag...');
            console.log('window.show_9731351:', typeof window.show_9731351);
            console.log('–¢–µ–∫—É—â–∏–π –¥–æ–º–µ–Ω:', window.location.hostname);
            
            if (typeof window.show_9731351 !== 'undefined') {
                console.log('‚úÖ SDK –∑–∞–≥—Ä—É–∂–µ–Ω, –∑–∞–ø—É—Å–∫–∞–µ–º —Ä–µ–∫–ª–∞–º—É...');
                try {
                    window.show_9731351().then(() => {
                        console.log('‚úÖ –†–µ–∫–ª–∞–º–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
                        completeAdWatch();
                    }).catch((error) => {
                        console.error('‚ùå –û—à–∏–±–∫–∞ —Ä–µ–∫–ª–∞–º—ã:', error);
                        // –ë–µ–∑ alert: —Ç–∏—Ö–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ª–æ–≥
                        if (navigator.vibrate) navigator.vibrate(30);
                    });
                } catch (error) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∫–∞–∑–µ —Ä–µ–∫–ª–∞–º—ã:', error);
                    if (navigator.vibrate) navigator.vibrate(30);
                }
            } else {
                console.log('‚ö†Ô∏è SDK –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
                if (navigator.vibrate) navigator.vibrate(20);
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∫–ª–∞–º—ã Adstera
        function handleWatchAdstera() {
            if (!canWatchAdstera()) {
                return;
            }
            
            console.log('üîç –ó–∞–ø—É—Å–∫ —Ä–µ–∫–ª–∞–º—ã Adstera...');
            
            try {
                showAdsteraAd();
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∫–∞–∑–µ —Ä–µ–∫–ª–∞–º—ã Adstera:', error);
                if (navigator.vibrate) navigator.vibrate(30);
            }
        }

        // –ü–æ–∫–∞–∑ —Ä–µ–∫–ª–∞–º—ã Adstera
        function showAdsteraAd() {
            const container = document.getElementById(ADSTERA_CONFIG.containerId);
            if (!container) {
                console.error('‚ùå –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä Adstera –Ω–µ –Ω–∞–π–¥–µ–Ω');
                return;
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            container.style.display = 'block';
            container.style.position = 'fixed';
            container.style.top = '0';
            container.style.left = '0';
            container.style.width = '100%';
            container.style.height = '100%';
            container.style.zIndex = '10000';
            container.style.backgroundColor = 'rgba(0, 0, 0, 0.9)';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è
            const closeButton = document.createElement('button');
            closeButton.textContent = '‚úï';
            closeButton.style.cssText = `
                position: absolute;
                top: 20px;
                right: 20px;
                background: rgba(255, 255, 255, 0.2);
                border: none;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                color: white;
                font-size: 20px;
                cursor: pointer;
                z-index: 10001;
            `;
            
            closeButton.addEventListener('click', () => {
                hideAdsteraAd();
            });
            
            container.appendChild(closeButton);
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è
            let countdown = ADSTERA_CONFIG.adDuration;
            const timerElement = document.createElement('div');
            timerElement.style.cssText = `
                position: absolute;
                top: 20px;
                left: 20px;
                background: rgba(0, 0, 0, 0.7);
                color: white;
                padding: 10px 15px;
                border-radius: 20px;
                font-size: 16px;
                z-index: 10001;
            `;
            timerElement.textContent = `–ó–∞–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ ${countdown} —Å–µ–∫`;
            
            container.appendChild(timerElement);
            
            const timer = setInterval(() => {
                countdown--;
                timerElement.textContent = `–ó–∞–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ ${countdown} —Å–µ–∫`;
                
                if (countdown <= 0) {
                    clearInterval(timer);
                    hideAdsteraAd();
                }
            }, 1000);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–∞–π–º–µ—Ä –¥–ª—è –æ—á–∏—Å—Ç–∫–∏
            container.dataset.timer = timer;
            
            console.log('‚úÖ –†–µ–∫–ª–∞–º–∞ Adstera –∑–∞–ø—É—â–µ–Ω–∞');
        }

        // –°–∫—Ä—ã—Ç–∏–µ —Ä–µ–∫–ª–∞–º—ã Adstera
        function hideAdsteraAd() {
            const container = document.getElementById(ADSTERA_CONFIG.containerId);
            if (!container) return;
            
            // –û—á–∏—â–∞–µ–º —Ç–∞–π–º–µ—Ä
            if (container.dataset.timer) {
                clearInterval(parseInt(container.dataset.timer));
                delete container.dataset.timer;
            }
            
            // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            container.innerHTML = '';
            container.style.display = 'none';
            
            // –ó–∞–≤–µ—Ä—à–∞–µ–º –ø—Ä–æ—Å–º–æ—Ç—Ä
            completeAdsteraWatch();
        }

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∫–ª–∞–º—ã Monetag
        function completeAdWatch() {
            gameData.coins += AD_CONFIG.rewardAmount;
            gameData.adsWatched++;
            gameData.tasksCompleted++;
            gameData.lastAdWatch = Date.now();
            
            updateDisplay();
            saveGameData();
            // –ë–µ–∑ alert
        }

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∫–ª–∞–º—ã Adstera
        function completeAdsteraWatch() {
            gameData.coins += ADSTERA_CONFIG.rewardAmount;
            gameData.adsteraAdsWatched++;
            gameData.tasksCompleted++;
            gameData.lastAdsteraWatch = Date.now();
            
            updateDisplay();
            saveGameData();
            
            // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–∞–≥—Ä–∞–¥–µ
            if (navigator.vibrate) navigator.vibrate([100, 50, 100]);
            console.log(`‚úÖ –†–µ–∫–ª–∞–º–∞ Adstera –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –ü–æ–ª—É—á–µ–Ω–æ ${ADSTERA_CONFIG.rewardAmount} –º–æ–Ω–µ—Ç`);
        }

        // –°–±—Ä–æ—Å –∫—É–ª–¥–∞—É–Ω–∞ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
        function resetAdCooldown() {
            gameData.lastAdWatch = 0;
            saveGameData();
            updateDisplay();
            // –ë–µ–∑ alert
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥—Ä—É–≥–∏—Ö –∑–∞–¥–∞–Ω–∏–π
        function handlePlayGame() {
            // –ë–µ–∑ alert, —Ç–æ–ª—å–∫–æ –∑–∞–≥–ª—É—à–∫–∞
            if (navigator.vibrate) navigator.vibrate(20);
        }

        function handleInstallApp() {
            if (navigator.vibrate) navigator.vibrate(20);
        }

        // –í–æ–∑–≤—Ä–∞—Ç –Ω–∞–∑–∞–¥
        function goBack() {
            window.location.href = '/';
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–¥–∞–Ω–∏–π –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
            loadGameData();
            
            // –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
            document.getElementById('watchAdBtn').addEventListener('click', handleWatchAd);
            document.getElementById('watchAdsteraBtn').addEventListener('click', handleWatchAdstera);
            document.getElementById('playGameBtn').addEventListener('click', handlePlayGame);
            document.getElementById('installAppBtn').addEventListener('click', handleInstallApp);
            document.getElementById('resetCooldownBtn').addEventListener('click', resetAdCooldown);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫—É–ª–¥–∞—É–Ω –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É –¥–ª—è –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —á–∞—Å–æ–≤
            setInterval(() => {
                checkCooldown();
                checkAdsteraCooldown();
            }, 1000);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º SDK —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                console.log('üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ SDK Monetag –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ...');
                console.log('window.show_9731351:', typeof window.show_9731351);
                if (typeof window.show_9731351 === 'undefined') {
                    console.warn('‚ö†Ô∏è SDK Monetag –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω!');
                } else {
                    console.log('‚úÖ SDK Monetag –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ!');
                }
            }, 2000);
        });
    </script>
</body>
</html>
